/* Chessist - Evaluation Bar Styles */

/* When using Chess.com's native container */
#board-layout-evaluation {
  display: block !important;
}

#evaluation.chess-live-eval-bar {
  position: relative !important;
  width: 100% !important;
  height: 100% !important;
  background: #000 !important;
  border-radius: 4px !important;
  overflow: hidden !important;
}

/* Fallback custom eval bar */
.chess-live-eval-bar:not(#evaluation) {
  position: absolute;
  left: -32px;
  top: 0;
  width: 26px;
  background: #000;
  border-radius: 4px;
  overflow: hidden;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.3);
  z-index: 100;
}

.chess-live-eval-bar-fill {
  position: absolute !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  background: #fff !important;
  transition: height 0.3s ease-out !important;
  border-radius: 0 0 4px 4px !important;
  z-index: 1 !important;
}

/* Ensure fill shows in native Chess.com container */
#evaluation .chess-live-eval-bar-fill {
  position: absolute !important;
  bottom: 0 !important;
  left: 0 !important;
  right: 0 !important;
  width: 100% !important;
  background: #fff !important;
  z-index: 1 !important;
}

/* Flipped bar colors when playing as black (player's color at bottom) */
.chess-live-eval-bar.flipped {
  background: #fff !important;
}

.chess-live-eval-bar.flipped .chess-live-eval-bar-fill {
  background: #000 !important;
}

#evaluation.chess-live-eval-bar.flipped {
  background: #fff !important;
}

#evaluation.chess-live-eval-bar.flipped .chess-live-eval-bar-fill {
  background: #000 !important;
}

.chess-live-eval-score {
  position: absolute;
  left: 50%;
  bottom: 18px;
  transform: translateX(-50%);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-size: 11px;
  font-weight: 700;
  padding: 2px 4px;
  border-radius: 3px;
  white-space: nowrap;
  z-index: 10;
  color: #000;
  background: rgba(255, 255, 255, 0.85);
}

/* When flipped (playing as black), adjust score background for contrast */
.chess-live-eval-bar.flipped .chess-live-eval-score {
  color: #fff;
  background: rgba(0, 0, 0, 0.85);
}

/* Best move indicator - shown at top of bar (black area) */
.chess-live-eval-best-move {
  position: absolute;
  top: 4px;
  left: 50%;
  transform: translateX(-50%);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-size: 9px;
  font-weight: 600;
  color: #792A9E;
  background: rgba(0, 0, 0, 0.8);
  padding: 2px 4px;
  border-radius: 3px;
  white-space: nowrap;
  z-index: 12;
}

/* Countdown timer for auto-move - shown below best move */
.chess-live-eval-countdown {
  position: absolute;
  top: 20px;
  left: 50%;
  transform: translateX(-50%);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-size: 10px;
  font-weight: 700;
  color: #ff9500;
  background: rgba(0, 0, 0, 0.9);
  padding: 2px 6px;
  border-radius: 3px;
  white-space: nowrap;
  z-index: 13;
  animation: countdown-pulse 0.5s infinite alternate;
}

@keyframes countdown-pulse {
  0% { opacity: 0.7; }
  100% { opacity: 1; }
}

/* Depth indicator - positioned at bottom (white area), so use black text */
.chess-live-eval-depth {
  position: absolute;
  bottom: 4px;
  left: 50%;
  transform: translateX(-50%);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-size: 9px;
  font-weight: 600;
  color: rgba(0, 0, 0, 0.7);
  white-space: nowrap;
  z-index: 11;
}

/* When flipped (playing as black), depth is on black background - use white text */
.chess-live-eval-bar.flipped .chess-live-eval-depth {
  color: rgba(255, 255, 255, 0.8);
}

/* Mate indicator */
.chess-live-eval-score.mate {
  font-size: 10px;
}

/* Loading state */
.chess-live-eval-bar.loading {
  opacity: 0.6;
}

.chess-live-eval-bar.loading::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    180deg,
    transparent 0%,
    rgba(255, 255, 255, 0.1) 50%,
    transparent 100%
  );
  animation: loading-pulse 1.5s infinite;
}

@keyframes loading-pulse {
  0%, 100% { opacity: 0; }
  50% { opacity: 1; }
}

/* Best move arrow overlay */
.chess-live-eval-arrow-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  pointer-events: none;
  z-index: 100;
}

.chess-live-eval-arrow-overlay .best-move-arrow-group {
  filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4));
}

/* Turn indicator (debug) - shows Turn/Player */
.chess-live-eval-turn {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  font-size: 8px;
  font-weight: 700;
  color: #888;
  background: rgba(0, 0, 0, 0.6);
  padding: 1px 3px;
  border-radius: 2px;
  white-space: nowrap;
  z-index: 15;
  cursor: help;
  margin-top: 20px;
}

.chess-live-eval-turn.my-turn {
  color: #792A9E;
  background: rgba(0, 0, 0, 0.8);
}
